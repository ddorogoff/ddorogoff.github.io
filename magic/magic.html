<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Предсказание</title>

<style>
html,body{
  height:100%;
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
  background: radial-gradient(1200px 800px at 20% 10%, #ffffff 0%, #fff7da 45%, #fff2c0 100%);
  overflow:hidden;
  color:#111;
}

/* ---------- СНЕГ ---------- */
#snow{
  position:fixed;
  inset:0;
  z-index:0;
  pointer-events:none;
}

/* ---------- ФОН ---------- */
.bg{
  position:fixed;
  inset:0;
  z-index:1;
  pointer-events:none;
}

.bg-lights{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  opacity:0.9;
}

/* ЁЛКА: торчит сбоку, огоньки работают */
.tree{
  position:absolute;
  left:-85px;     /* торчит сбоку */
  bottom:110px;   /* высота */
  width:210px;    /* размер */
  height:auto;
  opacity:0.16;
  filter: drop-shadow(0 10px 18px rgba(0,0,0,0.10));
  pointer-events:none;
}

@media (min-width: 520px){
  .tree{
    left:-95px;
    bottom:130px;
    width:240px;
    opacity:0.14;
  }
}

/* огоньки */
.light{ opacity:0.35; }
.l1{ fill:#ff4d4d; animation: twinkle 1.2s infinite; }
.l2{ fill:#4da3ff; animation: twinkle 1.1s infinite; animation-delay:.15s; }
.l3{ fill:#ffd24d; animation: twinkle 1.3s infinite; animation-delay:.28s; }
.l4{ fill:#6bff9d; animation: twinkle 1.15s infinite; animation-delay:.42s; }
.l5{ fill:#b56bff; animation: twinkle 1.25s infinite; animation-delay:.55s; }

@keyframes twinkle{
  0%,100%{ opacity:.25; filter:none; }
  50%{ opacity:.95; filter: drop-shadow(0 0 10px rgba(255,255,255,.55)); }
}

/* ---------- КОНТЕНТ ---------- */
.wrap{
  position:relative;
  z-index:2;
  height:100%;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
  text-align:center;
  transform: translateY(-36px); /* весь блок чуть выше */
}

.ui{
  width:min(560px,100%);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:14px;
}

h1{
  margin:0;
  font-size:20px;
  font-weight:800;
}

.subtitle{
  font-size:13px;
  opacity:.65;
}

/* ---------- СПИРАЛЬ ---------- */
.spiral-wrap{
  position:relative;
  width:230px;
  height:230px;
  display:grid;
  place-items:center;
  margin:10px 0;
  filter: drop-shadow(0 18px 40px rgba(0,0,0,0.12));
}

.ball{
  position:absolute;
  inset:10px;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 28%, rgba(255,255,255,.9), rgba(255,255,255,0) 45%),
    radial-gradient(circle at 55% 65%, #FFEFA3 0%, #FFD900 55%, #F5C400 100%);
}

.spinner{
  width:230px;
  height:230px;
  display:grid;
  place-items:center;
  transform-origin:50% 50%;
  will-change: transform;
  transform: rotate(0deg);
}

.spiral{
  width:210px;
  height:210px;
}

/* ---------- ТЕКСТ ---------- */
.status{
  font-size:13px;
  opacity:.65;
  min-height:18px;
}

.pred{
  font-size:18px;
  font-weight:700;
  min-height:56px;
}

/* ---------- КНОПКА ---------- */
.btn{
  width:min(360px,100%);
  border:0;
  border-radius:18px;
  padding:14px 16px;
  font-size:16px;
  font-weight:800;
  background:#111;
  color:#fff;
  cursor:pointer;
}
.btn:disabled{ opacity:.6; cursor:not-allowed; }
</style>
</head>

<body>
<canvas id="snow"></canvas>

<div class="bg" aria-hidden="true">
  <svg class="bg-lights" viewBox="0 0 1000 700" preserveAspectRatio="none">
    <defs>
      <radialGradient id="g1" cx="20%" cy="25%" r="60%">
        <stop offset="0%" stop-color="#ffffff" stop-opacity="0.70"/>
        <stop offset="55%" stop-color="#ffffff" stop-opacity="0.10"/>
        <stop offset="100%" stop-color="#ffffff" stop-opacity="0"/>
      </radialGradient>
      <radialGradient id="g2" cx="78%" cy="35%" r="70%">
        <stop offset="0%" stop-color="#ffffff" stop-opacity="0.50"/>
        <stop offset="60%" stop-color="#ffffff" stop-opacity="0.10"/>
        <stop offset="100%" stop-color="#ffffff" stop-opacity="0"/>
      </radialGradient>
    </defs>
    <rect width="1000" height="700" fill="url(#g1)"/>
    <rect width="1000" height="700" fill="url(#g2)"/>
  </svg>

  <!-- ЁЛКА (выглядывает сбоку) -->
  <svg class="tree" viewBox="0 0 260 340">
    <path d="M130 40 L55 150 H205 Z" fill="#2f7a40"/>
    <path d="M130 95 L40 230 H220 Z" fill="#2b6b3a"/>
    <path d="M130 155 L30 305 H230 Z" fill="#33884a"/>
    <rect x="112" y="300" width="36" height="40" rx="10" fill="#7a4b2a"/>

    <path d="M70 155 C95 130 115 170 145 150 C170 135 190 175 205 165"
          fill="none" stroke="rgba(255,255,255,0.35)" stroke-width="3" stroke-linecap="round"/>

    <circle class="light l1" cx="82" cy="150" r="6"/>
    <circle class="light l2" cx="110" cy="162" r="6"/>
    <circle class="light l3" cx="140" cy="150" r="6"/>
    <circle class="light l4" cx="168" cy="160" r="6"/>
    <circle class="light l5" cx="196" cy="165" r="6"/>
  </svg>
</div>

<div class="wrap">
  <div class="ui">
    <h1>Предсказание на год</h1>
    <div class="subtitle">Нажми кнопку — спиралька прокрутится</div>

    <div class="spiral-wrap">
      <div class="ball"></div>
      <div class="spinner" id="spinner">
        <svg class="spiral" viewBox="0 0 220 220">
          <path id="spiralPath" fill="none" stroke="#111" stroke-width="12"
                stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </div>

    <div class="status" id="status">Готово</div>
    <div class="pred" id="pred">…</div>
    <button class="btn" id="btn">Получить предсказание</button>
  </div>
</div>

<script>
/* ===== СПИРАЛЬ ===== */
(function buildSpiral(){
  const cx=110, cy=110, a=2, b=3.55;
  const max=5.35*Math.PI, step=.1;
  let d="", first=true;

  for(let t=0;t<=max;t+=step){
    const r=a+b*t;
    const x=cx+r*Math.cos(t);
    const y=cy+r*Math.sin(t);
    d+=`${first?"M":"L"} ${x.toFixed(2)} ${y.toFixed(2)} `;
    first=false;
  }
  document.getElementById("spiralPath").setAttribute("d", d);
})();

/* ===== ПРЕДСКАЗАНИЯ ===== */
const PRED=[
  "Этот год будет про простые и верные решения.",
  "Весной появится шанс, который нельзя откладывать.",
  "Ты сделаешь шаг, который долго боялся сделать.",
  "В этом году ты удивишься собственной смелости.",
  "К концу года многое встанет на свои места."
];

const btn=document.getElementById("btn");
const pred=document.getElementById("pred");
const status=document.getElementById("status");
const spinner=document.getElementById("spinner");

let angle=0, anim=null;

btn.onclick=async()=>{
  btn.disabled=true;
  pred.textContent="…";
  status.textContent="Крутим спиральку…";

  const delta=(2+Math.random()*2)*360+Math.random()*360;
  const start=angle;
  angle+=delta;

  if(anim) anim.cancel();
  anim=spinner.animate(
    [{transform:`rotate(${start}deg)`},{transform:`rotate(${angle}deg)`}],
    {duration:2200+Math.random()*800,easing:"cubic-bezier(.2,.9,.2,1)",fill:"forwards"}
  );
  await anim.finished;
  spinner.style.transform=`rotate(${angle}deg)`;

  pred.textContent=PRED[Math.floor(Math.random()*PRED.length)];
  status.textContent="Готово";
  btn.disabled=false;
};

/* ===== СНЕГ ===== */
const c=document.getElementById("snow"),ctx=c.getContext("2d");
let w,h; const flakes=[];
function resize(){ w=c.width=innerWidth; h=c.height=innerHeight; }
resize(); addEventListener("resize",resize);

for(let i=0;i<120;i++){
  flakes.push({ x:Math.random()*w, y:Math.random()*h, r:1+Math.random()*2, v:0.5+Math.random()*1.5 });
}
(function snow(){
  ctx.clearRect(0,0,w,h);
  for(const f of flakes){
    f.y+=f.v; if(f.y>h) f.y=-10;
    ctx.beginPath(); ctx.arc(f.x,f.y,f.r,0,Math.PI*2);
    ctx.fillStyle="#fff"; ctx.fill();
  }
  requestAnimationFrame(snow);
})();
</script>
</body>
</html>




